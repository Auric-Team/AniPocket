[{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\anime\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\api\\search\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\search\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\app\\watch\\[id]\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":150,"column":37,"nodeType":"JSXOpeningElement","endLine":150,"endColumn":112}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\r\nimport { notFound } from 'next/navigation';\r\nimport VideoPlayer from '@/components/VideoPlayer';\r\nimport EpisodeList from '@/components/EpisodeList';\r\nimport SynopsisText from '@/components/SynopsisText';\r\nimport WatchProgressTracker from '@/components/WatchProgressTracker';\r\nimport { getAnimeDetails, getEpisodeServers } from '@/lib/hianime';\r\n\r\nexport default async function WatchPage({\r\n    params,\r\n    searchParams,\r\n}: {\r\n    params: Promise<{ id: string }>;\r\n    searchParams: Promise<{ ep?: string; num?: string }>;\r\n}) {\r\n    const { id } = await params;\r\n    const { ep, num } = await searchParams;\r\n\r\n    const anime = await getAnimeDetails(id);\r\n    if (!anime) {\r\n        notFound();\r\n    }\r\n\r\n    const currentEpId = ep || (anime.episodeList.length > 0 ? anime.episodeList[0].id : null);\r\n\r\n    if (!currentEpId) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-[#0b0c0f]\">\r\n                <div className=\"p-8 rounded bg-[#1e1e24] text-center max-w-md border border-white/5\">\r\n                    <h2 className=\"text-xl font-bold text-white mb-2\">No Episodes Found</h2>\r\n                    <p className=\"text-[#888] text-sm mb-6\">We couldn&apos;t find any episodes for this anime.</p>\r\n                    <Link href=\"/\" className=\"bg-[var(--accent)] text-[#111] px-6 py-2 rounded font-bold text-sm\">Return Home</Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const episodeNumber = num ? parseInt(num) : (anime.episodeList.find(e => e.id === currentEpId)?.number || 1);\r\n    const currentIndex = anime.episodeList.findIndex(e => e.id === currentEpId);\r\n    const prevEpisode = currentIndex > 0 ? anime.episodeList[currentIndex - 1] : null;\r\n    const nextEpisode = currentIndex < anime.episodeList.length - 1 ? anime.episodeList[currentIndex + 1] : null;\r\n\r\n    const nextEpisodeUrl = nextEpisode ? `/watch/${id}?ep=${nextEpisode.id}&num=${nextEpisode.number}` : undefined;\r\n\r\n    const servers = await getEpisodeServers(currentEpId);\r\n    const hasDub = servers.dub;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[var(--bg-primary)] relative\">\r\n\r\n            {/* 1. MASSIVE CINEMATIC BACKGROUND */}\r\n            <div className=\"absolute top-0 left-0 right-0 h-[80vh] w-full z-0 overflow-hidden pointer-events-none\">\r\n                {/* Core Image Grid - aggressively blurred */}\r\n                <div\r\n                    className=\"absolute inset-0 bg-cover bg-center bg-[#09090b] blur-3xl scale-110 opacity-60 transition-all duration-1000\"\r\n                    style={{ backgroundImage: `url(${anime.image})` }}\r\n                />\r\n                {/* Vignettes & Gradients to ensure text is readable */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-[var(--bg-primary)] via-[var(--bg-primary)]/80 to-transparent\" />\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-[var(--bg-primary)] via-transparent to-transparent\" />\r\n            </div>\r\n\r\n            {/* 2. MAIN CONTENT WRAPPER */}\r\n            <div className=\"relative z-10 pt-[60px] flex flex-col min-h-screen\">\r\n\r\n                {/* Glassmorphism Breadcrumb strip */}\r\n                <div className=\"w-full bg-black/20 backdrop-blur-md py-2 border-b border-white/5\">\r\n                    <div className=\"container max-w-[1400px] mx-auto px-4\">\r\n                        <nav className=\"flex items-center gap-2 text-[13px] font-medium text-[#aaaaaa]\">\r\n                            <Link href=\"/\" className=\"hover:text-white transition-colors drop-shadow-md\">Home</Link>\r\n                            <span className=\"text-white/30 text-[10px]\">●</span>\r\n                            <Link href=\"/search?type=tv\" className=\"hover:text-white transition-colors drop-shadow-md\">TV</Link>\r\n                            <span className=\"text-white/30 text-[10px]\">●</span>\r\n                            <Link href={`/anime/${id}`} className=\"text-[#f4f4f5] font-bold hover:text-white transition-colors line-clamp-1 max-w-[200px] drop-shadow-md\">\r\n                                {anime.title}\r\n                            </Link>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Invisible Watch History Tracker */}\r\n                <WatchProgressTracker\r\n                    animeId={anime.id}\r\n                    animeTitle={anime.title}\r\n                    animeImage={anime.image}\r\n                    episodeId={currentEpId}\r\n                    episodeNumber={episodeNumber}\r\n                />\r\n\r\n                <div className=\"container max-w-[1400px] mx-auto px-4 mt-6 pb-12\">\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start\">\r\n\r\n                        {/* Video Column */}\r\n                        <div className=\"lg:col-span-3\">\r\n                            {/* Video Player Box with Cinematic Glow */}\r\n                            <div className=\"bg-[#09090b] overflow-hidden rounded-t-xl shadow-[0_0_50px_rgba(255,176,0,0.05)] border border-white/5 relative z-10 transition-all duration-500 hover:shadow-[0_0_50px_rgba(255,176,0,0.1)]\">\r\n                                <VideoPlayer\r\n                                    episodeId={currentEpId}\r\n                                    animeTitle={anime.title}\r\n                                    episodeNumber={episodeNumber}\r\n                                    hasDub={hasDub}\r\n                                    nextEpisodeUrl={nextEpisodeUrl}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Player Controls Underneath (Auto Play, Next, Prev, Light) */}\r\n                            <div className=\"flex items-center justify-between bg-[#242428] px-4 py-3 text-[13px] font-semibold text-[#aaaaaa] border-t border-[#111]\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <button className=\"flex items-center gap-1.5 hover:text-[var(--accent)] transition-colors\">\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" /></svg>\r\n                                        Lights\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    {prevEpisode ? (\r\n                                        <Link\r\n                                            href={`/watch/${id}?ep=${prevEpisode.id}&num=${prevEpisode.number}`}\r\n                                            className=\"px-3 py-1.5 hover:text-[var(--accent)] transition-colors flex items-center gap-1\"\r\n                                        >\r\n                                            <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M15 19l-7-7 7-7\" /></svg>\r\n                                            Prev\r\n                                        </Link>\r\n                                    ) : (\r\n                                        <button disabled className=\"px-3 py-1.5 text-[#555] cursor-not-allowed flex items-center gap-1\">\r\n                                            <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M15 19l-7-7 7-7\" /></svg>\r\n                                            Prev\r\n                                        </button>\r\n                                    )}\r\n\r\n                                    {nextEpisode ? (\r\n                                        <Link\r\n                                            href={`/watch/${id}?ep=${nextEpisode.id}&num=${nextEpisode.number}`}\r\n                                            className=\"px-3 py-1.5 hover:text-[var(--accent)] transition-colors flex items-center gap-1 text-white border-l border-[#333] pl-4\"\r\n                                        >\r\n                                            Next\r\n                                            <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M9 5l7 7-7 7\" /></svg>\r\n                                        </Link>\r\n                                    ) : (\r\n                                        <button disabled className=\"px-3 py-1.5 text-[#555] cursor-not-allowed flex items-center gap-1 border-l border-[#333] pl-4\">\r\n                                            Max\r\n                                            <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M9 5l7 7-7 7\" /></svg>\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Title Section below player */}\r\n                            <div className=\"mt-6 mb-8 flex flex-col md:flex-row gap-6\">\r\n                                <div className=\"w-[160px] hidden md:block shrink-0\">\r\n                                    <img src={anime.image} alt={anime.title} className=\"w-full object-cover\" />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <h1 className=\"text-2xl font-semibold text-white mb-2\">\r\n                                        {anime.title}\r\n                                    </h1>\r\n                                    <div className=\"flex items-center gap-3 text-xs mb-4\">\r\n                                        <div className=\"flex bg-[#242428]/90 font-bold rounded overflow-hidden\">\r\n                                            {anime.episodes?.sub && (\r\n                                                <span className=\"bg-[var(--badge-sub)] text-[#111] px-1.5 py-[2px] flex items-center\">\r\n                                                    <svg className=\"w-3 h-3 mr-0.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z\" /></svg>\r\n                                                    {anime.episodes.sub}\r\n                                                </span>\r\n                                            )}\r\n                                            {anime.episodes?.dub && (\r\n                                                <span className=\"bg-[var(--badge-dub)] text-[#111] px-1.5 py-[2px] flex items-center border-l border-black/10\">\r\n                                                    <svg className=\"w-3 h-3 mr-0.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /></svg>\r\n                                                    {anime.episodes.dub}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        <span className=\"text-[#888]\">PG-13</span>\r\n                                        <span className=\"text-[#888]\">HD</span>\r\n                                    </div>\r\n                                    <p className=\"text-[#aaaaaa] text-[13px] leading-[1.6] mb-4\">\r\n                                        <SynopsisText text={anime.synopsis || \"No synopsis available.\"} maxLength={200} />\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Right Side Episodes List */}\r\n                        <div className=\"lg:col-span-1\">\r\n                            <div className=\"bg-[#1e1e24] w-full flex flex-col h-[500px] lg:h-[calc(100vh-140px)] sticky top-[80px]\">\r\n                                <div className=\"p-3 border-b border-[#2b2b31] flex items-center justify-between\">\r\n                                    <h3 className=\"font-semibold text-white\">List of episodes:</h3>\r\n                                </div>\r\n                                <div className=\"flex-1 overflow-hidden bg-[#242428]\">\r\n                                    <EpisodeList\r\n                                        episodes={anime.episodeList}\r\n                                        animeId={id}\r\n                                        currentEpisodeId={currentEpId}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\AnimeCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\BackgroundEffects.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\ContinueWatchingClient.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":25,"column":33,"nodeType":"JSXOpeningElement","endLine":25,"endColumn":189}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useWatchHistory } from '@/hooks/useWatchHistory';\r\n\r\nexport default function ContinueWatchingClient() {\r\n    const { history, isLoaded, removeFromHistory } = useWatchHistory();\r\n\r\n    // Return nothing until client loads to avoid hydration mismatch, or if empty\r\n    if (!isLoaded || !history || history.length === 0) return null;\r\n\r\n    return (\r\n        <section className=\"mb-12 relative z-10 pt-16 md:pt-24\">\r\n            <div className=\"flex items-center justify-between mb-4 md:px-2\">\r\n                <h2 className=\"text-xl md:text-2xl font-bold text-[#f4f4f5] tracking-tight flex items-center gap-2 font-outfit\">\r\n                    Continue Watching\r\n                </h2>\r\n            </div>\r\n\r\n            <div className=\"flex overflow-x-auto gap-4 pb-6 pt-2 px-4 md:px-2 scrollbar-hide snap-x\">\r\n                {history.map((item) => (\r\n                    <div key={`cw-${item.id}`} className=\"relative flex-shrink-0 w-[240px] md:w-[280px] snap-start group animate-in fade-in transition-all\">\r\n                        <Link href={`/watch/${item.id}?ep=${item.episodeId}&num=${item.episodeNumber}`} className=\"block relative bg-[#27272a] border border-white/5 rounded-xl overflow-hidden transition-all duration-500 group-hover:border-[#FFB000]/50 shadow-[0_4px_20px_rgba(0,0,0,0.5)] group-hover:shadow-[0_0_30px_rgba(255,176,0,0.15)] transform group-hover:scale-[1.02]\">\r\n                            <div className=\"relative w-full aspect-video bg-[#09090b]\">\r\n                                <img src={item.image || '/placeholder.jpg'} alt={item.title} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\" />\r\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-[var(--bg-secondary)] via-transparent to-transparent opacity-80 z-10\" />\r\n\r\n                                {/* Custom Play Button Overlay */}\r\n                                <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20 bg-black/40 backdrop-blur-[2px]\">\r\n                                    <div className=\"w-14 h-14 bg-[#f4f4f5] rounded-full flex items-center justify-center text-[#09090b] shadow-[0_4px_20px_rgba(255,255,255,0.2)] transform scale-90 group-hover:scale-100 transition-transform duration-500\">\r\n                                        <svg className=\"w-6 h-6 ml-1 fill-current\" viewBox=\"0 0 24 24\"><path d=\"M8 5v14l11-7z\" /></svg>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"p-4 relative z-20 bg-[#27272a]\">\r\n                                <h3 className=\"font-semibold text-[#f4f4f5] text-[15px] line-clamp-1 group-hover:text-[#FFB000] transition-colors\">{item.title}</h3>\r\n                                <p className=\"text-[13px] text-[#FFB000] mt-1 font-bold\">Resuming Episode {item.episodeNumber}</p>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        {/* Delete History Action */}\r\n                        <button\r\n                            onClick={(e) => { e.preventDefault(); removeFromHistory(item.id); }}\r\n                            className=\"absolute top-2 right-2 z-30 w-8 h-8 bg-black/80 hover:bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all backdrop-blur-sm border border-white/10\"\r\n                            title=\"Remove from history\"\r\n                        >\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2.5} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\EpisodeList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\FilterSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\Hero.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[17,46],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport SearchBar from './SearchBar';\r\n\r\nexport default function Hero() {\r\n    return (\r\n        <section className=\"relative py-16 md:py-24 overflow-hidden\">\r\n            {/* Subtle Background Gradient */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-b from-[var(--accent)]/5 to-transparent pointer-events-none\" />\r\n\r\n            <div className=\"container relative\">\r\n                <div className=\"max-w-3xl mx-auto text-center\">\r\n                    {/* Badge */}\r\n                    <div className=\"inline-flex items-center gap-2 px-3 py-1.5 mb-6 bg-[var(--bg-card)] border border-[var(--border)] rounded-full text-sm\">\r\n                        <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n                        <span className=\"text-[var(--text-secondary)]\">Streaming Now</span>\r\n                    </div>\r\n\r\n                    {/* Title */}\r\n                    <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-4 tracking-tight\">\r\n                        Watch Anime <span className=\"gradient-text\">Online Free</span>\r\n                    </h1>\r\n\r\n                    {/* Subtitle */}\r\n                    <p className=\"text-lg text-[var(--text-secondary)] mb-8 max-w-xl mx-auto\">\r\n                        Stream thousands of anime episodes in HD quality. No ads, no signup required.\r\n                    </p>\r\n\r\n                    {/* Search */}\r\n                    <SearchBar />\r\n\r\n                    {/* Quick Stats */}\r\n                    <div className=\"flex items-center justify-center gap-8 mt-10 pt-8 border-t border-[var(--border)]\">\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-2xl font-bold text-[var(--text-primary)]\">10K+</div>\r\n                            <div className=\"text-sm text-[var(--text-muted)]\">Anime</div>\r\n                        </div>\r\n                        <div className=\"w-px h-10 bg-[var(--border)]\" />\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-2xl font-bold text-[var(--text-primary)]\">100K+</div>\r\n                            <div className=\"text-sm text-[var(--text-muted)]\">Episodes</div>\r\n                        </div>\r\n                        <div className=\"w-px h-10 bg-[var(--border)]\" />\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-2xl font-bold text-[var(--text-primary)]\">HD</div>\r\n                            <div className=\"text-sm text-[var(--text-muted)]\">Quality</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\HeroCarousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\LiveSearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[407,410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[407,410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\nexport default function LiveSearchBar() {\r\n    // 1. Core State\r\n    const [query, setQuery] = useState('');\r\n    const [results, setResults] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    // 2. Refs & Hooks\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n\r\n    // 3. Debounce Timer Ref\r\n    const debounceTimer = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    // Close on click outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    // Close on route change\r\n    useEffect(() => {\r\n        setIsOpen(false);\r\n        setQuery('');\r\n    }, [pathname]);\r\n\r\n    // Live Fetcher Engine\r\n    const fetchResults = async (searchQuery: string) => {\r\n        if (!searchQuery.trim() || searchQuery.length < 2) {\r\n            setResults([]);\r\n            setIsOpen(false);\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setIsOpen(true);\r\n        try {\r\n            // Hit our Next.js API route that wraps hianime's `searchAnime`\r\n            const res = await fetch(`/api/search?q=${encodeURIComponent(searchQuery)}`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setResults(data.slice(0, 5)); // Keep dropdown clean with top 5\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Live search failed\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value;\r\n        setQuery(val);\r\n\r\n        if (debounceTimer.current) clearTimeout(debounceTimer.current);\r\n\r\n        if (val.length < 2) {\r\n            setIsOpen(false);\r\n            setResults([]);\r\n            return;\r\n        }\r\n\r\n        debounceTimer.current = setTimeout(() => fetchResults(val), 400); // 400ms debounce\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter' && query.trim()) {\r\n            setIsOpen(false);\r\n            router.push(`/search?keyword=${encodeURIComponent(query)}`);\r\n            setQuery('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div ref={dropdownRef} className=\"relative w-full lg:w-[400px]\">\r\n            {/* Input Bar */}\r\n            <div className=\"flex items-center bg-[#2b2b31] rounded-full w-full h-10 px-4 group focus-within:ring-1 focus-within:ring-[#FFB000] focus-within:bg-[#18181b] transition-all duration-300 shadow-sm border border-transparent focus-within:border-white/5\">\r\n                <span className={`mr-3 transition-colors ${isLoading ? 'text-[#FFB000] animate-pulse' : 'text-[#888]'}`}>\r\n                    {isLoading ? (\r\n                        <div className=\"w-4 h-4 rounded-full border-2 border-t-[#FFB000] border-r-transparent border-b-[#FFB000] border-l-transparent animate-spin\" />\r\n                    ) : (\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2.5} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                        </svg>\r\n                    )}\r\n                </span>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    value={query}\r\n                    onChange={handleInputChange}\r\n                    onKeyDown={handleKeyDown}\r\n                    onFocus={() => query.length >= 2 && setIsOpen(true)}\r\n                    placeholder=\"Search anime...\"\r\n                    className=\"bg-transparent border-none outline-none text-white text-[13px] font-medium w-full placeholder-[#888]\"\r\n                />\r\n\r\n                {query && (\r\n                    <button\r\n                        onClick={() => { setQuery(''); setIsOpen(false); }}\r\n                        className=\"p-1 hover:text-white text-[#888] transition-colors bg-[#ffffff0a] rounded-md border border-white/5\"\r\n                    >\r\n                        <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Auto-Complete Dropdown Menu */}\r\n            <AnimatePresence>\r\n                {isOpen && query.length >= 2 && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                        exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                        transition={{ duration: 0.2, ease: \"easeOut\" }}\r\n                        className=\"absolute top-12 left-0 right-0 bg-[#18181b]/95 backdrop-blur-2xl border border-white/10 rounded-xl shadow-[0_30px_60px_rgba(0,0,0,0.8)] overflow-hidden z-[200]\"\r\n                    >\r\n                        {isLoading && results.length === 0 ? (\r\n                            <div className=\"p-4 text-center text-sm text-[#888] flex items-center justify-center gap-2\">\r\n                                <div className=\"w-3 h-3 rounded-full border-2 border-t-[#FFB000] border-r-transparent border-b-[#FFB000] border-l-transparent animate-spin\" />\r\n                                Searching database...\r\n                            </div>\r\n                        ) : results.length > 0 ? (\r\n                            <div className=\"flex flex-col\">\r\n                                {results.map((anime) => (\r\n                                    <Link\r\n                                        key={anime.id}\r\n                                        href={`/watch/${anime.id}`}\r\n                                        className=\"group flex items-center gap-3 p-3 hover:bg-[#ffffff0a] transition-colors border-b border-white/5 last:border-0\"\r\n                                    >\r\n                                        <div className=\"relative w-10 h-14 rounded overflow-hidden shrink-0 bg-[#27272a]\">\r\n                                            <Image\r\n                                                src={anime.image}\r\n                                                alt={anime.title}\r\n                                                fill\r\n                                                className=\"object-cover group-hover:scale-110 transition-transform duration-500\"\r\n                                                unoptimized\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <h4 className=\"text-[13px] font-semibold text-[#f4f4f5] line-clamp-1 group-hover:text-[#FFB000] transition-colors\">\r\n                                                {anime.title}\r\n                                            </h4>\r\n                                            <div className=\"flex items-center gap-2 mt-1.5 text-[11px] font-medium text-[#888]\">\r\n                                                <span>{anime.type || 'TV'}</span>\r\n                                                <span className=\"w-1 h-1 rounded-full bg-[#52525b]\" />\r\n                                                <span>{anime.duration?.replace('m', ' min') || '24 min'}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Link>\r\n                                ))}\r\n                                <Link\r\n                                    href={`/search?keyword=${encodeURIComponent(query)}`}\r\n                                    className=\"p-3 text-center text-[12px] font-bold text-[#FFB000] hover:text-[#09090b] hover:bg-[#FFB000] transition-colors flex items-center justify-center gap-1 group\"\r\n                                >\r\n                                    View All Results\r\n                                    <svg className=\"w-3.5 h-3.5 group-hover:translate-x-1 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M9 5l7 7-7 7\" /></svg>\r\n                                </Link>\r\n                            </div>\r\n                        ) : query.length >= 2 ? (\r\n                            <div className=\"p-4 text-center text-sm text-[#888]\">\r\n                                No anime found for &quot;{query}&quot;\r\n                            </div>\r\n                        ) : null}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\Logo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\MobileNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\Navbar.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":98,"column":33,"nodeType":"JSXOpeningElement","endLine":98,"endColumn":210}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport Logo from './Logo';\r\nimport LiveSearchBar from './LiveSearchBar';\r\n\r\nexport default function Navbar() {\r\n    const [isScrolled, setIsScrolled] = useState(false);\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const pathname = usePathname();\r\n\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            setIsScrolled(window.scrollY > 20);\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    // Close mobile menu on route change\r\n    useEffect(() => {\r\n        setTimeout(() => setIsMobileMenuOpen(false), 0);\r\n    }, [pathname]);\r\n\r\n    const navLinks = [\r\n        { name: 'Home', href: '/' },\r\n        { name: 'Subbed Anime', href: '/search?sort=trending' },\r\n        { name: 'Dubbed Anime', href: '/search?type=movie' },\r\n        { name: 'Most Popular', href: '/search?type=tv' },\r\n    ];\r\n\r\n    return (\r\n        <header\r\n            className={`fixed top-0 left-0 right-0 z-[100] transition-colors duration-500 ${isScrolled ? 'bg-[#0b0c0f]/80 backdrop-blur-xl border-b border-white/5 shadow-2xl' : 'bg-gradient-to-b from-[#09090b]/80 to-transparent'\r\n                }`}\r\n        >\r\n            <div className=\"container mx-auto px-4 max-w-[1400px]\">\r\n                <div className=\"flex items-center justify-between h-14 md:h-16\">\r\n                    {/* Left side: Hamburger + Logo */}\r\n                    <div className=\"flex items-center gap-4 lg:gap-6\">\r\n                        {/* Mobile Hamburger Button */}\r\n                        <button\r\n                            onClick={() => setIsMobileMenuOpen(true)}\r\n                            className=\"lg:hidden p-1.5 -ml-1.5 text-[#aaaaaa] hover:text-[var(--accent)] transition-colors\"\r\n                        >\r\n                            <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                            </svg>\r\n                        </button>\r\n\r\n                        <Link href=\"/\" className=\"flex items-center gap-1.5 shrink-0\">\r\n                            <Logo />\r\n                        </Link>\r\n\r\n                        {/* Desktop Search Bar */}\r\n                        <div className=\"hidden lg:block w-[400px]\">\r\n                            <LiveSearchBar />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right side: Nav links + User Actions */}\r\n                    <div className=\"flex items-center gap-4 shrink-0\">\r\n                        {/* Desktop Links */}\r\n                        <nav className=\"hidden lg:flex items-center gap-6 mr-4\">\r\n                            {navLinks.map((item) => {\r\n                                const isActive = pathname === item.href;\r\n                                return (\r\n                                    <Link\r\n                                        key={item.name}\r\n                                        href={item.href}\r\n                                        className={`text-[13px] font-medium transition-colors ${isActive ? 'text-[var(--accent)]' : 'text-[#aaaaaa] hover:text-[var(--accent)]'\r\n                                            }`}\r\n                                    >\r\n                                        {item.name}\r\n                                    </Link>\r\n                                )\r\n                            })}\r\n                        </nav>\r\n\r\n                        {/* Mobile Search Icon */}\r\n                        <Link\r\n                            href=\"/search\"\r\n                            className=\"lg:hidden p-2 text-[#aaaaaa] hover:text-[var(--accent)] transition-colors\"\r\n                        >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                            </svg>\r\n                        </Link>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <button className=\"hidden sm:block text-sm font-semibold text-white bg-[#2b2b31] hover:bg-[#3b3b42] px-4 py-2 rounded-lg transition-colors\">\r\n                                Login\r\n                            </button>\r\n                            <div className=\"w-8 h-8 rounded-full bg-[var(--accent)] cursor-pointer overflow-hidden flex items-center justify-center\">\r\n                                <img src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&backgroundColor=transparent\" alt=\"Avatar\" className=\"w-full h-full object-cover mix-blend-multiply opacity-80\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Drawer Overlay */}\r\n            {isMobileMenuOpen && (\r\n                <div className=\"fixed inset-0 z-[200] lg:hidden flex\">\r\n                    {/* Backdrop */}\r\n                    <div\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity\"\r\n                        onClick={() => setIsMobileMenuOpen(false)}\r\n                    />\r\n\r\n                    {/* Drawer */}\r\n                    <div className=\"relative w-[280px] h-full bg-[var(--bg-secondary)] shadow-2xl flex flex-col transform transition-transform duration-300 translate-x-0\">\r\n                        <div className=\"p-4 border-b border-[#ffffff14] flex items-center justify-between\">\r\n                            <Logo />\r\n                            <button\r\n                                onClick={() => setIsMobileMenuOpen(false)}\r\n                                className=\"p-2 text-[#aaaaaa] hover:text-white bg-[#2b2b31] rounded-full transition-colors\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto py-4\">\r\n                            <nav className=\"flex flex-col gap-1 px-3\">\r\n                                {navLinks.map((item) => {\r\n                                    const isActive = pathname === item.href;\r\n                                    return (\r\n                                        <Link\r\n                                            key={item.name}\r\n                                            href={item.href}\r\n                                            className={`px-4 py-3 rounded-xl text-[14px] font-semibold transition-all ${isActive\r\n                                                ? 'bg-[var(--accent)] text-[#111]'\r\n                                                : 'text-[#aaaaaa] hover:bg-[#2b2b31] hover:text-white'\r\n                                                }`}\r\n                                        >\r\n                                            {item.name}\r\n                                        </Link>\r\n                                    )\r\n                                })}\r\n                            </nav>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-[#ffffff14]\">\r\n                            <button className=\"w-full text-sm font-bold text-[#111] bg-[var(--accent)] hover:bg-[var(--accent-hover)] py-3 rounded-xl transition-colors\">\r\n                                Login to Sync\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </header>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\PlaceholderImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\SidebarList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'viewAllLink' is defined but never used.","line":16,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\nimport { motion } from 'framer-motion';\r\nimport { Anime } from '@/lib/types';\r\n\r\nconst MotionLink = motion.create(Link);\r\n\r\ninterface SidebarListProps {\r\n    title: string;\r\n    animeList: Anime[];\r\n    viewAllLink?: string;\r\n}\r\n\r\nexport default function SidebarList({ title, animeList, viewAllLink }: SidebarListProps) {\r\n    if (!animeList || animeList.length === 0) return null;\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true, margin: \"-50px\" }}\r\n            transition={{ duration: 0.5, ease: \"easeOut\" }}\r\n            className=\"w-full\"\r\n        >\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <h2 className=\"text-xl font-bold text-white tracking-wide\">\r\n                    {title}\r\n                </h2>\r\n            </div>\r\n\r\n            <div className=\"bg-[#18181b] rounded-xl border border-white/5 overflow-hidden shadow-lg\">\r\n                <div className=\"flex border-b border-white/5\">\r\n                    <button className=\"flex-1 py-3 text-sm font-bold text-[#FFB000] border-b-2 border-[#FFB000] bg-[#27272a]/50 transition-colors\">Today</button>\r\n                    <button className=\"flex-1 py-3 text-sm font-medium text-[#a1a1aa] hover:text-[#f4f4f5] transition-colors\">Week</button>\r\n                    <button className=\"flex-1 py-3 text-sm font-medium text-[#a1a1aa] hover:text-[#f4f4f5] transition-colors\">Month</button>\r\n                </div>\r\n\r\n                <motion.div\r\n                    initial=\"hidden\"\r\n                    whileInView=\"visible\"\r\n                    viewport={{ once: true }}\r\n                    variants={{\r\n                        hidden: { opacity: 0 },\r\n                        visible: {\r\n                            opacity: 1,\r\n                            transition: { staggerChildren: 0.08 }\r\n                        }\r\n                    }}\r\n                    className=\"flex flex-col\"\r\n                >\r\n                    {animeList.slice(0, 5).map((anime, index) => (\r\n                        <MotionLink\r\n                            key={anime.id}\r\n                            href={`/watch/${anime.id}`}\r\n                            variants={{\r\n                                hidden: { opacity: 0, x: -20 },\r\n                                visible: { opacity: 1, x: 0, transition: { type: \"spring\", stiffness: 300, damping: 24 } }\r\n                            }}\r\n                            className=\"group flex flex-col md:flex-row items-center p-3 border-b border-white/5 last:border-0 hover:bg-[#ffffff05] transition-colors\"\r\n                        >\r\n                            <div className=\"w-10 shrink-0 flex items-center justify-center mr-2\">\r\n                                <span className={`text-2xl font-black font-outfit ${index === 0 ? 'text-[#FFB000]' :\r\n                                    index === 1 ? 'text-[#FF5E00]' :\r\n                                        index === 2 ? 'text-[#e5c786]' : 'text-zinc-600'\r\n                                    }`}>\r\n                                    {index + 1}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center w-full gap-3\">\r\n                                {/* Thin Poster */}\r\n                                <div className=\"relative w-14 h-20 shrink-0 rounded-md bg-[#27272a] overflow-hidden shadow-sm\">\r\n                                    <Image\r\n                                        src={anime.image}\r\n                                        alt={anime.title}\r\n                                        fill\r\n                                        className=\"object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-300\"\r\n                                        unoptimized\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Stacked Meta Data */}\r\n                                <div className=\"flex flex-col min-w-0 flex-1 justify-center\">\r\n                                    <h4 className=\"text-[15px] font-semibold text-[#f4f4f5] group-hover:text-[#FFB000] transition-colors line-clamp-2 leading-snug mb-1.5\">\r\n                                        {anime.title}\r\n                                    </h4>\r\n\r\n                                    <div className=\"flex flex-wrap items-center gap-2 text-[12px] font-medium text-[#a1a1aa]\">\r\n                                        <span>{anime.type || 'TV'}</span>\r\n                                        <span className=\"w-1 h-1 rounded-full bg-[#52525b]\" />\r\n\r\n                                        {(anime.episodes?.sub || anime.episodes?.dub) && (\r\n                                            <div className=\"flex items-center gap-1.5\">\r\n                                                {anime.episodes.sub && (\r\n                                                    <div className=\"flex items-center text-[#ffdd95]\">\r\n                                                        <span className=\"font-bold border border-[#ffdd95]/30 bg-[#ffdd95]/10 px-1 rounded text-[10px]\">SUB</span>\r\n                                                        <span className=\"ml-1 text-[#f4f4f5]\">{anime.episodes.sub}</span>\r\n                                                    </div>\r\n                                                )}\r\n                                                {anime.episodes.dub && (\r\n                                                    <div className=\"flex items-center text-[#e3b5cd]\">\r\n                                                        <span className=\"font-bold border border-[#e3b5cd]/30 bg-[#e3b5cd]/10 px-1 rounded text-[10px]\">DUB</span>\r\n                                                        <span className=\"ml-1 text-[#f4f4f5]\">{anime.episodes.dub}</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </MotionLink>\r\n                    ))}\r\n                </motion.div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\SynopsisText.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\TrendingList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\VideoPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\components\\WatchProgressTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\hooks\\useWatchHistory.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":21,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nexport interface WatchHistoryItem {\r\n    id: string; // anime id\r\n    title: string;\r\n    image: string;\r\n    episodeId: string;\r\n    episodeNumber: number;\r\n    timestamp: number;\r\n}\r\n\r\nexport function useWatchHistory() {\r\n    const [history, setHistory] = useState<WatchHistoryItem[]>([]);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const stored = localStorage.getItem('anipocket_watch_history');\r\n        if (stored) {\r\n            try {\r\n                setTimeout(() => setHistory(JSON.parse(stored)), 0);\r\n            } catch (error) {\r\n                console.error('Failed to parse watch history');\r\n            }\r\n        }\r\n        setTimeout(() => setIsLoaded(true), 0);\r\n    }, []);\r\n\r\n    const addToHistory = (item: Omit<WatchHistoryItem, 'timestamp'>) => {\r\n        setHistory(prev => {\r\n            const filtered = prev.filter(h => h.id !== item.id);\r\n            const newHistory = [{ ...item, timestamp: Date.now() }, ...filtered].slice(0, 20); // Keep last 20 shows\r\n            localStorage.setItem('anipocket_watch_history', JSON.stringify(newHistory));\r\n            return newHistory;\r\n        });\r\n    };\r\n\r\n    const removeFromHistory = (id: string) => {\r\n        setHistory(prev => {\r\n            const newHistory = prev.filter(h => h.id !== id);\r\n            localStorage.setItem('anipocket_watch_history', JSON.stringify(newHistory));\r\n            return newHistory;\r\n        });\r\n    };\r\n\r\n    return { history, isLoaded, addToHistory, removeFromHistory };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\lib\\data.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'episodeList' is defined but never used.","line":160,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalEpisodes' is defined but never used.","line":160,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'episodeList' is defined but never used.","line":173,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalEpisodes' is defined but never used.","line":173,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Mock anime data with real episode IDs for video playback\r\nimport { Anime, AnimeDetails, Episode } from './types';\r\n\r\n// Popular anime with real hianime episode IDs\r\nexport const ANIME_DATA: AnimeDetails[] = [\r\n    {\r\n        id: 'jujutsu-kaisen-tv-534',\r\n        title: 'Jujutsu Kaisen',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx113415-bbBWj4pEFbgZ.jpg',\r\n        type: 'TV',\r\n        synopsis: 'Yuji Itadori is an unnaturally fit high school student living in Sendai. On the night his grandfather dies, Yuji\\'s friends find a rotting cursed finger at their school, attracting curses. Yuji swallows the finger to protect them and becomes the host of Ryomen Sukuna, a powerful curse.',\r\n        genres: ['Action', 'Fantasy', 'Supernatural'],\r\n        status: 'Completed',\r\n        aired: 'Oct 2020',\r\n        rating: '8.7',\r\n        episodes: { sub: 24, dub: 24 },\r\n        totalEpisodes: 24,\r\n        episodeList: [\r\n            { id: '88837', number: 1, title: 'Ryomen Sukuna' },\r\n            { id: '88838', number: 2, title: 'For Myself' },\r\n            { id: '88839', number: 3, title: 'Girl of Steel' },\r\n            { id: '89056', number: 4, title: 'Curse Womb Must Die' },\r\n            { id: '89057', number: 5, title: 'Curse Womb Must Die -II-' },\r\n            { id: '91098', number: 6, title: 'After Rain' },\r\n            { id: '91099', number: 7, title: 'Assault' },\r\n            { id: '91564', number: 8, title: 'Boredom' },\r\n            { id: '91900', number: 9, title: 'Small Fry and Reverse Retribution' },\r\n            { id: '92265', number: 10, title: 'Idle Transfiguration' },\r\n        ],\r\n    },\r\n    {\r\n        id: 'demon-slayer-kimetsu-no-yaiba-38',\r\n        title: 'Demon Slayer: Kimetsu no Yaiba',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx101922-PEn1CTc93blC.jpg',\r\n        type: 'TV',\r\n        synopsis: 'Since ancient times, rumors have said that man-eating demons lurk in the woods. Tanjiro works as a charcoal seller to support his family after his father\\'s death. One day, he returns home to find his entire family slaughtered, except for his sister Nezuko who has been turned into a demon.',\r\n        genres: ['Action', 'Fantasy', 'Supernatural'],\r\n        status: 'Completed',\r\n        aired: 'Apr 2019',\r\n        rating: '8.6',\r\n        episodes: { sub: 26, dub: 26 },\r\n        totalEpisodes: 26,\r\n        episodeList: [\r\n            { id: '32787', number: 1, title: 'Cruelty' },\r\n            { id: '32788', number: 2, title: 'Trainer Sakonji Urokodaki' },\r\n            { id: '32789', number: 3, title: 'Sabito and Makomo' },\r\n            { id: '32790', number: 4, title: 'Final Selection' },\r\n            { id: '32791', number: 5, title: 'My Own Steel' },\r\n            { id: '35063', number: 6, title: 'Swordsman Accompanying a Demon' },\r\n            { id: '35064', number: 7, title: 'Muzan Kibutsuji' },\r\n            { id: '35658', number: 8, title: 'The Smell of Enchanting Blood' },\r\n            { id: '36157', number: 9, title: 'Temari Demon and Arrow Demon' },\r\n            { id: '36158', number: 10, title: 'Together Forever' },\r\n        ],\r\n    },\r\n    {\r\n        id: 'attack-on-titan-112',\r\n        title: 'Attack on Titan',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx16498-C6FPmWm59CyP.jpg',\r\n        type: 'TV',\r\n        synopsis: 'After his hometown is destroyed and his mother is killed, young Eren Jaeger vows to cleanse the earth of the giant humanoid Titans that have brought humanity to the brink of extinction.',\r\n        genres: ['Action', 'Drama', 'Fantasy'],\r\n        status: 'Completed',\r\n        aired: 'Apr 2013',\r\n        rating: '9.0',\r\n        episodes: { sub: 25, dub: 25 },\r\n        totalEpisodes: 25,\r\n        episodeList: [\r\n            { id: '807', number: 1, title: 'To You, in 2000 Years: The Fall of Shiganshina, Part 1' },\r\n            { id: '808', number: 2, title: 'That Day: The Fall of Shiganshina, Part 2' },\r\n            { id: '809', number: 3, title: 'A Dim Light Amid Despair: Humanity\\'s Comeback, Part 1' },\r\n            { id: '810', number: 4, title: 'The Night of the Closing Ceremony: Humanity\\'s Comeback, Part 2' },\r\n            { id: '811', number: 5, title: 'First Battle: The Struggle for Trost, Part 1' },\r\n            { id: '812', number: 6, title: 'The World the Girl Saw: The Struggle for Trost, Part 2' },\r\n            { id: '813', number: 7, title: 'Small Blade: The Struggle for Trost, Part 3' },\r\n            { id: '814', number: 8, title: 'I Can Hear His Heartbeat: The Struggle for Trost, Part 4' },\r\n            { id: '815', number: 9, title: 'Whereabouts of His Left Arm: The Struggle for Trost, Part 5' },\r\n            { id: '816', number: 10, title: 'Response: The Struggle for Trost, Part 6' },\r\n        ],\r\n    },\r\n    {\r\n        id: 'one-piece-21',\r\n        title: 'One Piece',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx21-YCDoj1EkAxFn.jpg',\r\n        type: 'TV',\r\n        synopsis: 'Gol D. Roger was known as the \"Pirate King,\" the strongest and most infamous being to have sailed the Grand Line. His execution brought a change throughout the world, inspiring countless souls to pursue their dreams and set sail to find his legendary treasure, One Piece.',\r\n        genres: ['Action', 'Adventure', 'Comedy'],\r\n        status: 'Ongoing',\r\n        aired: 'Oct 1999',\r\n        rating: '8.9',\r\n        episodes: { sub: 1100, dub: 900 },\r\n        totalEpisodes: 10,\r\n        episodeList: [\r\n            { id: '1', number: 1, title: 'I\\'m Luffy! The Man Who\\'s Gonna Be King of the Pirates!' },\r\n            { id: '2', number: 2, title: 'Enter the Great Swordsman! Pirate Hunter Roronoa Zoro!' },\r\n            { id: '3', number: 3, title: 'Morgan versus Luffy! Who\\'s the Mysterious Pretty Girl?' },\r\n            { id: '4', number: 4, title: 'Luffy\\'s Past! Enter Red-Haired Shanks!' },\r\n            { id: '5', number: 5, title: 'A Terrifying Mysterious Power! Captain Buggy, the Clown Pirate!' },\r\n            { id: '6', number: 6, title: 'Desperate Situation! Beast Tamer Mohji vs. Luffy!' },\r\n            { id: '7', number: 7, title: 'Epic Showdown! Swordsman Zoro vs. Acrobat Cabaji!' },\r\n            { id: '8', number: 8, title: 'Who is the Victor? Devil Fruit Power Showdown!' },\r\n            { id: '9', number: 9, title: 'The Honorable Liar? Captain Usopp!' },\r\n            { id: '10', number: 10, title: 'The Weirdest Guy Ever! Jango the Hypnotist!' },\r\n        ],\r\n    },\r\n    {\r\n        id: 'naruto-20',\r\n        title: 'Naruto',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx20-LxrhhIQyiE60.jpg',\r\n        type: 'TV',\r\n        synopsis: 'In another world, ninja are the ultimate power, and in the Village Hidden in the Leaves live the stealthiest ninja in the land. Naruto Uzumaki, a mischievous adolescent ninja, struggles as he searches for recognition and dreams of becoming the Hokage.',\r\n        genres: ['Action', 'Adventure', 'Shounen'],\r\n        status: 'Completed',\r\n        aired: 'Oct 2002',\r\n        rating: '8.3',\r\n        episodes: { sub: 220, dub: 220 },\r\n        totalEpisodes: 10,\r\n        episodeList: [\r\n            { id: '11', number: 1, title: 'Enter: Naruto Uzumaki!' },\r\n            { id: '12', number: 2, title: 'My Name is Konohamaru!' },\r\n            { id: '13', number: 3, title: 'Sasuke and Sakura: Friends or Foes?' },\r\n            { id: '14', number: 4, title: 'Pass or Fail: Survival Test' },\r\n            { id: '15', number: 5, title: 'You Failed! Kakashi\\'s Final Decision' },\r\n            { id: '16', number: 6, title: 'A Dangerous Mission! Journey to the Land of Waves!' },\r\n            { id: '17', number: 7, title: 'The Assassin of the Mist!' },\r\n            { id: '18', number: 8, title: 'The Oath of Pain' },\r\n            { id: '19', number: 9, title: 'Kakashi: Sharingan Warrior!' },\r\n            { id: '20', number: 10, title: 'The Forest of Chakra' },\r\n        ],\r\n    },\r\n    {\r\n        id: 'my-hero-academia-21459',\r\n        title: 'My Hero Academia',\r\n        image: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx21459-RoPwgrZ32gM3.jpg',\r\n        type: 'TV',\r\n        synopsis: 'In a world where 80% of humans have superpowers called \"Quirks,\" Izuku Midoriya is born without any powers. Despite this, he dreams of becoming a hero like his idol All Might, the greatest hero of all time.',\r\n        genres: ['Action', 'Comedy', 'Superhero'],\r\n        status: 'Ongoing',\r\n        aired: 'Apr 2016',\r\n        rating: '8.4',\r\n        episodes: { sub: 13, dub: 13 },\r\n        totalEpisodes: 10,\r\n        episodeList: [\r\n            { id: '19842', number: 1, title: 'Izuku Midoriya: Origin' },\r\n            { id: '19843', number: 2, title: 'What It Takes to Be a Hero' },\r\n            { id: '19844', number: 3, title: 'Roaring Muscles' },\r\n            { id: '19845', number: 4, title: 'Start Line' },\r\n            { id: '19846', number: 5, title: 'What I Can Do For Now' },\r\n            { id: '19847', number: 6, title: 'Rage, You Damned Nerd' },\r\n            { id: '19848', number: 7, title: 'Deku vs. Kacchan' },\r\n            { id: '19849', number: 8, title: 'Bakugo\\'s Start Line' },\r\n            { id: '19850', number: 9, title: 'Yeah, Just Do Your Best, Ida!' },\r\n            { id: '19851', number: 10, title: 'Encounter with the Unknown' },\r\n        ],\r\n    },\r\n];\r\n\r\n// Get all anime (for homepage)\r\nexport function getAllAnime(): Anime[] {\r\n    return ANIME_DATA.map(({ episodeList, totalEpisodes, ...anime }) => anime);\r\n}\r\n\r\n// Get anime by ID (for details page)\r\nexport function getAnimeById(id: string): AnimeDetails | undefined {\r\n    return ANIME_DATA.find(anime => anime.id === id);\r\n}\r\n\r\n// Search anime by title\r\nexport function searchAnime(query: string): Anime[] {\r\n    const lowerQuery = query.toLowerCase();\r\n    return ANIME_DATA\r\n        .filter(anime => anime.title.toLowerCase().includes(lowerQuery))\r\n        .map(({ episodeList, totalEpisodes, ...anime }) => anime);\r\n}\r\n\r\n// Get episode by ID\r\nexport function getEpisodeById(animeId: string, episodeId: string): Episode | undefined {\r\n    const anime = getAnimeById(animeId);\r\n    return anime?.episodeList.find(ep => ep.id === episodeId);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\lib\\hianime.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":157,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":169,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":169,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":181,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":193,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":205,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":231,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":231,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// HiAnime.to data provider - 100% realtime data via proxy\r\nimport axios from 'axios';\r\nimport * as cheerio from 'cheerio';\r\nimport { Anime, AnimeDetails, Episode, AdvancedSearchFilters, PageResult } from './types';\r\n\r\n// Proxy configuration\r\nconst PROXY_BASE = 'https://cors.eu.org';\r\nconst HIANIME_URL = 'https://hianime.to';\r\n\r\n// Helper to create proxied URL\r\nfunction proxyUrl(path: string): string {\r\n    return `${PROXY_BASE}/${HIANIME_URL}${path}`;\r\n}\r\n\r\n// Helper to convert any HiAnime image URL to a 300x400 poster\r\nfunction toPosterUrl(url: string): string {\r\n    if (!url) return '';\r\n    // Replace any dimension pattern (e.g., 1366x768, 1920x1080) with 300x400\r\n    return url.replace(/\\/thumbnail\\/\\d+x\\d+\\//, '/thumbnail/300x400/');\r\n}\r\n\r\n// Create axios client\r\nconst client = axios.create({\r\n    timeout: 30000,\r\n    headers: {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\r\n    },\r\n});\r\n\r\n// Helper to parse standard anime items (Grid view)\r\nfunction parseAnimeItems($: cheerio.CheerioAPI, selector: string): Anime[] {\r\n    const anime: Anime[] = [];\r\n    $(selector).each((_, el) => {\r\n        const $el = $(el);\r\n        const $link = $el.find('.film-poster a').first();\r\n        const $img = $el.find('.film-poster img').first();\r\n        const href = $link.attr('href') || '';\r\n        const id = href.split('/').pop()?.split('?')[0] || '';\r\n        if (id && !anime.find(a => a.id === id)) {\r\n            const type = $el.find('.fdi-item').first().text().trim() || 'TV';\r\n\r\n            // Ensure episodes is treated properly\r\n            const episodes: { sub: number | undefined; dub: number | undefined } = {\r\n                sub: parseInt($el.find('.tick-sub').text().replace(/\\s/g, '')) || undefined,\r\n                dub: parseInt($el.find('.tick-dub').text().replace(/\\s/g, '')) || undefined,\r\n            };\r\n            anime.push({\r\n                id,\r\n                title: $link.attr('title') || $img.attr('alt') || $el.find('.film-name').text().trim() || 'Unknown',\r\n                image: $img.attr('data-src') || $img.attr('src') || '',\r\n                type,\r\n                episodes,\r\n            });\r\n        }\r\n    });\r\n    return anime;\r\n}\r\n\r\n// 1. Spotlight (Hero Slider)\r\nexport async function getSpotlightAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Spotlight...');\r\n        const { data } = await client.get(proxyUrl('/home'));\r\n        const $ = cheerio.load(data);\r\n        const anime: Anime[] = [];\r\n\r\n        $('#slider .swiper-slide').each((_, el) => {\r\n            const $el = $(el);\r\n            const $content = $el.find('.deslide-item-content');\r\n            const $img = $el.find('.film-poster-img');\r\n\r\n            const watchLink = $content.find('.desi-buttons a').last().attr('href');\r\n            const id = watchLink?.split('/').pop()?.split('?')[0] || '';\r\n\r\n            if (id) {\r\n                const subText = $content.find('.tick-sub').text().trim();\r\n                const dubText = $content.find('.tick-dub').text().trim();\r\n                const bannerImage = $img.attr('data-src') || $img.attr('src') || '';\r\n\r\n                // Use robust regex replacer\r\n                const posterImage = toPosterUrl(bannerImage);\r\n\r\n                anime.push({\r\n                    id,\r\n                    title: $content.find('.desi-head-title').text().trim(),\r\n                    image: bannerImage,\r\n                    poster: posterImage,\r\n                    synopsis: $content.find('.desi-description').text().trim(),\r\n                    type: $content.find('.scd-item').first().text().trim() || 'TV',\r\n                    episodes: {\r\n                        sub: parseInt(subText) || undefined,\r\n                        dub: parseInt(dubText) || undefined,\r\n                    },\r\n                });\r\n            }\r\n        });\r\n        return anime;\r\n    } catch (error) {\r\n        console.error('[AniPocket] Error fetching spotlight:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// 2. Trending (Ranked List #trending-home)\r\nexport async function getTrendingAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Trending...');\r\n        const { data } = await client.get(proxyUrl('/home'));\r\n        const $ = cheerio.load(data);\r\n        const anime: Anime[] = [];\r\n\r\n        $('#trending-home .swiper-slide').each((i, el) => {\r\n            const $el = $(el);\r\n\r\n            // FIX: The anchor tag IS the .film-poster element, not a child of it\r\n            let $link = $el.find('.film-poster');\r\n            if ($link.length === 0 || !$link.is('a')) {\r\n                // Fallback: try finding 'a' inside if structure changes\r\n                $link = $el.find('.film-poster a');\r\n            }\r\n\r\n            const $img = $el.find('img'); // Just find any img inside\r\n\r\n            const id = $link.attr('href')?.split('/').pop()?.split('?')[0] || '';\r\n\r\n            const rank = parseInt($el.find('.number span').text().trim()) || i + 1;\r\n            const title = $el.find('.film-title').text().trim() || $el.find('.dynamic-name').text().trim();\r\n            const image = $img.attr('data-src') || $img.attr('src') || '';\r\n\r\n            if (id) {\r\n                anime.push({\r\n                    id,\r\n                    title,\r\n                    image,\r\n                    rank: rank,\r\n                    type: 'TV'\r\n                });\r\n            }\r\n        });\r\n\r\n        console.log(`[AniPocket] Found ${anime.length} trending items`);\r\n        return anime;\r\n    } catch (error) {\r\n        console.error('[AniPocket] Error fetching trending:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// 3. Latest Episodes\r\nexport async function getLatestEpisodeAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Latest Episodes...');\r\n        const { data } = await client.get(proxyUrl('/home'));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item').slice(0, 24);\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// 4. Top Airing\r\nexport async function getTopAiringAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Top Airing...');\r\n        const { data } = await client.get(proxyUrl('/top-airing'));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// 5. Most Popular\r\nexport async function getMostPopularAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Most Popular...');\r\n        const { data } = await client.get(proxyUrl('/most-popular'));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// 6. Most Favorite\r\nexport async function getMostFavoriteAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Most Favorite...');\r\n        const { data } = await client.get(proxyUrl('/most-favorite'));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// 7. Latest Completed\r\nexport async function getLatestCompletedAnime(): Promise<Anime[]> {\r\n    try {\r\n        console.log('[AniPocket] Fetching Latest Completed...');\r\n        const { data } = await client.get(proxyUrl('/completed'));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// Generic: Get anime by category\r\nexport async function getAnimeByCategory(category: string): Promise<Anime[]> {\r\n    try {\r\n        const path = category.startsWith('/') ? category : `/${category}`;\r\n        console.log(`[AniPocket] Fetching category: ${path}`);\r\n        const { data } = await client.get(proxyUrl(path));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        console.error(`[AniPocket] Error fetching category ${category}:`, error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// Search anime (Basic)\r\nexport async function searchAnime(query: string): Promise<Anime[]> {\r\n    try {\r\n        console.log(`[AniPocket] Searching for: ${query}`);\r\n        const { data } = await client.get(proxyUrl(`/search?keyword=${encodeURIComponent(query)}`));\r\n        const $ = cheerio.load(data);\r\n        return parseAnimeItems($, '.film_list-wrap .flw-item');\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// Advanced Search & Filter (Paginated)\r\nexport async function getAdvancedSearchAnime(filters: AdvancedSearchFilters): Promise<PageResult<Anime>> {\r\n    try {\r\n        const queryParams = new URLSearchParams();\r\n        if (filters.keyword) queryParams.append('keyword', filters.keyword);\r\n        if (filters.type) queryParams.append('type', filters.type);\r\n        if (filters.status) queryParams.append('status', filters.status);\r\n        if (filters.sort) queryParams.append('sort', filters.sort);\r\n        if (filters.genres) queryParams.append('genres', filters.genres);\r\n        if (filters.page) queryParams.append('page', filters.page.toString());\r\n\r\n        const url = `/filter?${queryParams.toString()}`;\r\n        console.log(`[AniPocket] Fetching advanced search: ${url}`);\r\n\r\n        const { data } = await client.get(proxyUrl(url));\r\n        const $ = cheerio.load(data);\r\n\r\n        const animes = parseAnimeItems($, '.film_list-wrap .flw-item');\r\n\r\n        let totalPages = 1;\r\n        let hasNextPage = false;\r\n        const currentPage = filters.page || 1;\r\n\r\n        const $pagination = $('.pagination');\r\n        if ($pagination.length > 0) {\r\n            const $lastPage = $pagination.find('a.page-link').not('[title=\"Next\"], [title=\"Prev\"]').last();\r\n            if ($lastPage.length > 0) {\r\n                totalPages = parseInt($lastPage.attr('href')?.match(/page=(\\d+)/)?.[1] || '1') || 1;\r\n            }\r\n            // Check for next button\r\n            if ($pagination.find('a[title=\"Next\"], a:contains(\"Next\")').length > 0) {\r\n                hasNextPage = true;\r\n            }\r\n        }\r\n\r\n        return {\r\n            animes,\r\n            totalPages,\r\n            hasNextPage,\r\n            currentPage\r\n        };\r\n    } catch (error) {\r\n        console.error('[AniPocket] Error fetching advanced search:', error);\r\n        return { animes: [], totalPages: 1, hasNextPage: false, currentPage: filters.page || 1 };\r\n    }\r\n}\r\n\r\n// Get anime details\r\nexport async function getAnimeDetails(animeId: string): Promise<AnimeDetails | null> {\r\n    try {\r\n        console.log(`[AniPocket] Getting details for: ${animeId}`);\r\n        const { data: pageData } = await client.get(proxyUrl(`/${animeId}`));\r\n        const $ = cheerio.load(pageData);\r\n\r\n        const title = $('.anisc-detail .film-name').text().trim() || $('h2.film-name').text().trim() || 'Unknown';\r\n        const image = $('.film-poster img').attr('src') || '';\r\n        const synopsis = $('.film-description .text').text().trim() || '';\r\n\r\n        const genres: string[] = [];\r\n        // FIX: Wrap push in curly braces to avoid returning number\r\n        $('.item-list a[href*=\"/genre/\"]').each((_, el) => {\r\n            genres.push($(el).text().trim());\r\n        });\r\n\r\n        const statusText = $('.item-list').text();\r\n        const status = statusText.includes('Airing') ? 'Ongoing' : 'Completed';\r\n\r\n        const subCount = parseInt($('.film-stats .tick .tick-item.tick-sub').text().trim()) || 0;\r\n        const dubCount = parseInt($('.film-stats .tick .tick-item.tick-dub').text().trim()) || 0;\r\n\r\n        const dataId = $('[data-id]').first().attr('data-id') || $('.film-buttons a[data-id]').attr('data-id') || '';\r\n\r\n        const episodes: Episode[] = [];\r\n        if (dataId) {\r\n            const ajaxUrl = `${PROXY_BASE}/${HIANIME_URL}/ajax/v2/episode/list/${dataId}`;\r\n            const { data: epData } = await client.get(ajaxUrl);\r\n            const epHtml = typeof epData === 'string' ? epData : epData.html || '';\r\n            const $eps = cheerio.load(epHtml);\r\n\r\n            $eps('.ep-item, a.ep-item').each((_, el) => {\r\n                const $ep = $eps(el);\r\n                const epId = $ep.attr('data-id') || $ep.attr('href')?.match(/ep=(\\d+)/)?.[1] || '';\r\n                const epNum = parseInt($ep.attr('data-number') || $ep.text().trim() || '0');\r\n                const epTitle = $ep.attr('title') || `Episode ${epNum}`;\r\n                const isFiller = $ep.hasClass('ssl-item-filler');\r\n\r\n                if (epId && epNum > 0) {\r\n                    episodes.push({ id: epId, number: epNum, title: epTitle, isFiller });\r\n                }\r\n            });\r\n            episodes.sort((a, b) => a.number - b.number);\r\n        }\r\n\r\n        return {\r\n            id: animeId,\r\n            title,\r\n            image,\r\n            synopsis,\r\n            genres,\r\n            status,\r\n            type: 'TV',\r\n            episodeList: episodes,\r\n            episodes: { sub: subCount, dub: dubCount },\r\n            totalEpisodes: episodes.length,\r\n        };\r\n    } catch (error) {\r\n        console.error('[AniPocket] Error fetching details:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n// Check episode server availability\r\nexport async function getEpisodeServers(episodeId: string): Promise<{ sub: boolean; dub: boolean }> {\r\n    try {\r\n        const ajaxUrl = `${PROXY_BASE}/${HIANIME_URL}/ajax/v2/episode/servers?episodeId=${episodeId}`;\r\n        const { data } = await client.get(ajaxUrl);\r\n        const html = typeof data === 'string' ? data : data.html || '';\r\n        const $ = cheerio.load(html);\r\n\r\n        const sub = $('.item.server-item[data-type=\"sub\"]').length > 0;\r\n        const dub = $('.item.server-item[data-type=\"dub\"]').length > 0;\r\n\r\n        return { sub, dub };\r\n    } catch (error) {\r\n        console.error('[AniPocket] Error fetching servers:', error);\r\n        return { sub: false, dub: false };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\lib\\megaplay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abhi\\OneDrive\\Desktop\\AniPocket\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
